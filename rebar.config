%% -*- mode: erlang;erlang-indent-level: 4;indent-tabs-mode: nil -*-
%% ex: ft=erlang ts=4 sw=4 et

{erl_opts,
  [ debug_info,
    {parse_transform, lager_transform},
    %% warnings_as_errors, % disabled due to disabled function
    strict_validation,
    warn_bif_clash,
    warn_deprecated_function,
    warn_export_all,
    warn_export_vars,
    warn_exported_vars,
    warn_obsolete_guard,
    warn_shadow_vars,
    warn_unused_import,
    warn_unused_function,
    warn_unused_record,
    warn_unused_vars]
}.

{deps, [
    {lager, ".*", {git, "git://github.com/basho/lager.git", {tag, "2.1.1"}}},
    {rebar_lock_deps_plugin, ".*", {git, "git://github.com/seth/rebar_lock_deps_plugin.git",
                                   {tag, "3.1.0"}}},
    {poolboy, ".*", {git, "git://github.com/devinus/poolboy.git",
                                   {tag, "1.5.1"}}},
    {chipmunk2d, ".*", {git, "git://github.com/slembcke/Chipmunk2D.git",
                        {tag, "Chipmunk-7.0.1"}}, [raw]},
    {uthash, ".*", {git, "git://github.com/troydhanson/uthash.git",
                        {tag, "v1.9.9"}}, [raw]}
]}.

% {port_env, [{"CFLAGS", "$CFLAGS -g -O3 -Wall -I/usr/include/security"},
%             {"x86_64", "CFLAGS", "$CFLAGS -m$ERLANG_ARCH"},
%             {"x86_64", "LDFLAGS", "-m$ERLANG_ARCH $LDFLAGS"},
%             {"i[36]86", "CFLAGS", "$CFLAGS -m$ERLANG_ARCH"},
%             {"i[36]86", "LDFLAGS", "-m$ERLANG_ARCH $LDFLAGS"}
%            ]}.

% {port_specs, [{"priv/lib/epam.so", ["c_src/epam.c"]},
%               {"priv/lib/setuid_drv.so", ["c_src/setuid_drv.c"]}]}.

% {pre_hooks, [{compile, "cd deps/chipmunk2d; cmake .; make; cd .."},
%              {clean, "cd deps/chipmunk2d; make clean; cd .."}]}.

{plugins, [rebar_lock_deps_plugin]}.
